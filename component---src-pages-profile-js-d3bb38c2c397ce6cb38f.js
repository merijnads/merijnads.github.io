"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[486],{73206:function(e,t,n){var a=n(67294),i=n(73935),r=n(70703),o=n(11291),s=n(57544);function l(e){return e.substring(2).toLowerCase()}t.Z=function(e){var t=e.children,n=e.disableReactTree,u=void 0!==n&&n,c=e.mouseEvent,d=void 0===c?"onClick":c,m=e.onClickAway,h=e.touchEvent,f=void 0===h?"onTouchEnd":h,p=a.useRef(!1),v=a.useRef(null),g=a.useRef(!1),_=a.useRef(!1);a.useEffect((function(){return setTimeout((function(){g.current=!0}),0),function(){g.current=!1}}),[]);var E=a.useCallback((function(e){v.current=i.findDOMNode(e)}),[]),Z=(0,o.Z)(t.ref,E),b=(0,s.Z)((function(e){var t=_.current;if(_.current=!1,g.current&&v.current&&!function(e){return document.documentElement.clientWidth<e.clientX||document.documentElement.clientHeight<e.clientY}(e))if(p.current)p.current=!1;else{var n;if(e.composedPath)n=e.composedPath().indexOf(v.current)>-1;else n=!(0,r.Z)(v.current).documentElement.contains(e.target)||v.current.contains(e.target);n||!u&&t||m(e)}})),C=function(e){return function(n){_.current=!0;var a=t.props[e];a&&a(n)}},k={ref:Z};return!1!==f&&(k[f]=C(f)),a.useEffect((function(){if(!1!==f){var e=l(f),t=(0,r.Z)(v.current),n=function(){p.current=!0};return t.addEventListener(e,b),t.addEventListener("touchmove",n),function(){t.removeEventListener(e,b),t.removeEventListener("touchmove",n)}}}),[b,f]),!1!==d&&(k[d]=C(d)),a.useEffect((function(){if(!1!==d){var e=l(d),t=(0,r.Z)(v.current);return t.addEventListener(e,b),function(){t.removeEventListener(e,b)}}}),[b,d]),a.createElement(a.Fragment,null,a.cloneElement(t,k))}},62944:function(e,t,n){var a=n(45987),i=n(4942),r=n(87462),o=n(67294),s=n(85505),l=n(34621),u=n(381),c=n(73206),d=n(57544),m=n(81664),h=n(88231),f=n(43337),p=n(58337),v=o.forwardRef((function(e,t){var n=e.action,i=e.anchorOrigin,l=(i=void 0===i?{vertical:"bottom",horizontal:"center"}:i).vertical,v=i.horizontal,g=e.autoHideDuration,_=void 0===g?null:g,E=e.children,Z=e.classes,b=e.className,C=e.ClickAwayListenerProps,k=e.ContentProps,x=e.disableWindowBlurListener,w=void 0!==x&&x,y=e.message,I=e.onClose,L=e.onEnter,O=e.onEntered,S=e.onEntering,F=e.onExit,N=e.onExited,T=e.onExiting,M=e.onMouseEnter,R=e.onMouseLeave,P=e.open,D=e.resumeHideDuration,B=e.TransitionComponent,W=void 0===B?f.Z:B,j=e.transitionDuration,z=void 0===j?{enter:u.x9.enteringScreen,exit:u.x9.leavingScreen}:j,H=e.TransitionProps,V=(0,a.Z)(e,["action","anchorOrigin","autoHideDuration","children","classes","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onClose","onEnter","onEntered","onEntering","onExit","onExited","onExiting","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"]),A=o.useRef(),U=o.useState(!0),G=U[0],q=U[1],X=(0,d.Z)((function(){I&&I.apply(void 0,arguments)})),Y=(0,d.Z)((function(e){I&&null!=e&&(clearTimeout(A.current),A.current=setTimeout((function(){X(null,"timeout")}),e))}));o.useEffect((function(){return P&&Y(_),function(){clearTimeout(A.current)}}),[P,_,Y]);var J=function(){clearTimeout(A.current)},$=o.useCallback((function(){null!=_&&Y(null!=D?D:.5*_)}),[_,D,Y]);return o.useEffect((function(){if(!w&&P)return window.addEventListener("focus",$),window.addEventListener("blur",J),function(){window.removeEventListener("focus",$),window.removeEventListener("blur",J)}}),[w,$,P]),!P&&G?null:o.createElement(c.Z,(0,r.Z)({onClickAway:function(e){I&&I(e,"clickaway")}},C),o.createElement("div",(0,r.Z)({className:(0,s.Z)(Z.root,Z["anchorOrigin".concat((0,m.Z)(l)).concat((0,m.Z)(v))],b),onMouseEnter:function(e){M&&M(e),J()},onMouseLeave:function(e){R&&R(e),$()},ref:t},V),o.createElement(W,(0,r.Z)({appear:!0,in:P,onEnter:(0,h.Z)((function(){q(!1)}),L),onEntered:O,onEntering:S,onExit:F,onExited:(0,h.Z)((function(){q(!0)}),N),onExiting:T,timeout:z,direction:"top"===l?"down":"up"},H),E||o.createElement(p.Z,(0,r.Z)({message:y,action:n},k)))))}));t.Z=(0,l.Z)((function(e){var t={top:8},n={bottom:8},a={justifyContent:"flex-end"},o={justifyContent:"flex-start"},s={top:24},l={bottom:24},u={right:24},c={left:24},d={left:"50%",right:"auto",transform:"translateX(-50%)"};return{root:{zIndex:e.zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},anchorOriginTopCenter:(0,r.Z)({},t,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({},s,d))),anchorOriginBottomCenter:(0,r.Z)({},n,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({},l,d))),anchorOriginTopRight:(0,r.Z)({},t,a,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({left:"auto"},s,u))),anchorOriginBottomRight:(0,r.Z)({},n,a,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({left:"auto"},l,u))),anchorOriginTopLeft:(0,r.Z)({},t,o,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({right:"auto"},s,c))),anchorOriginBottomLeft:(0,r.Z)({},n,o,(0,i.Z)({},e.breakpoints.up("sm"),(0,r.Z)({right:"auto"},l,c)))}}),{flip:!1,name:"MuiSnackbar"})(v)},58337:function(e,t,n){var a=n(45987),i=n(4942),r=n(87462),o=n(67294),s=n(85505),l=n(34621),u=n(58063),c=n(37595),d=o.forwardRef((function(e,t){var n=e.action,i=e.classes,l=e.className,c=e.message,d=e.role,m=void 0===d?"alert":d,h=(0,a.Z)(e,["action","classes","className","message","role"]);return o.createElement(u.Z,(0,r.Z)({role:m,square:!0,elevation:6,className:(0,s.Z)(i.root,l),ref:t},h),o.createElement("div",{className:i.message},c),n?o.createElement("div",{className:i.action},n):null)}));t.Z=(0,l.Z)((function(e){var t="light"===e.palette.type?.8:.98,n=(0,c._4)(e.palette.background.default,t);return{root:(0,r.Z)({},e.typography.body2,(0,i.Z)({color:e.palette.getContrastText(n),backgroundColor:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:e.shape.borderRadius,flexGrow:1},e.breakpoints.up("sm"),{flexGrow:"initial",minWidth:288})),message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}}),{name:"MuiSnackbarContent"})(d)},38015:function(e,t,n){var a=n(67294),i=n(85420),r=n(29114),o=n(1097),s=n(48086),l=n(22702),u=n(31690),c=n(89711),d=n(31295),m=n(90058),h=n(52311),f=n(82441),p=n(50535),v=n(13578),g=n(50238);const _=p.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),E=p.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),Z=p.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),b=p.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),C=(0,p.default)(i.Z).withConfig({displayName:"CourseOptionsEditor__WarningBox",componentId:"sc-15i8a3h-4"})(["margin:2rem 0;background:#f1a9a0;padding:1rem;font-weight:bold;"]);class k extends a.Component{constructor(){super(...arguments),this.onClick=async e=>{e.preventDefault(),this.setState({submitting:!0});let t={digital_education_for_all:this.state.digital_education_for_all,use_course_variant:this.state.use_course_variant,course_variant:this.state.course_variant,marketing:this.state.marketing,research:this.state.research};const n={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};try{await(0,h.ek)({extraFields:t,userField:n}),this.setState({submitting:!1}),this.props.onComplete()}catch(a){this.setState({errorObj:a,submitting:!1})}},this.state={submitting:!1,error:!0,errorObj:void 0,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,use_course_variant:void 0,course_variant:"",course_variants:[],email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=e=>{const t=e.target.name,n=e.target.value;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCheckboxInput=e=>{const t=e.target.name,n=e.target.checked;this.setState({[t]:n},(()=>{this.validate()}))},this.handleCourseVariantCheckbox=e=>{this.setState({use_course_variant:e.target.checked,course_variant:""},(()=>{this.validate()}))},this.handleFocus=e=>{const t=e.target.name;this.setState({focused:t})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((e=>{const t=void 0===e.research,n=e.use_course_variant&&!e.course_variant;return{error:t||n}}))}}async componentDidMount(){var e,t,n,a,i,r,o,s,l;const u=await(0,h.$V)(),c=await(0,h.lI)();let d="t"===(null===(e=u.extra_fields)||void 0===e?void 0:e.use_course_variant),m=null!==(t=null===(n=u.extra_fields)||void 0===n?void 0:n.course_variant)&&void 0!==t?t:"";c.find((e=>e.key===m))||(d=!1,m=""),this.setState({first_name:null===(a=u.user_field)||void 0===a?void 0:a.first_name,last_name:null===(i=u.user_field)||void 0===i?void 0:i.last_name,email:u.email,student_number:null===(r=u.user_field)||void 0===r?void 0:r.organizational_id,digital_education_for_all:"t"===(null===(o=u.extra_fields)||void 0===o?void 0:o.digital_education_for_all),use_course_variant:d,course_variant:m,course_variants:c,marketing:"t"===(null===(s=u.extra_fields)||void 0===s?void 0:s.marketing),research:null===(l=u.extra_fields)||void 0===l?void 0:l.research,loading:!1},(()=>{this.validate()}))}render(){return a.createElement(b,null,a.createElement(f.Z,{loading:this.state.loading,heightHint:"490px"},a.createElement(Z,null,a.createElement(i.Z,null,a.createElement(r.Z,null,this.props.t("loggedInWith"),this.state.email)))),a.createElement("h1",null,this.props.t("studentInfo")),a.createElement(E,null,a.createElement(Z,null,this.props.t("aboutYourself")),a.createElement(f.Z,{loading:this.state.loading,heightHint:"490px"},a.createElement("div",null,a.createElement(_,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,hidden:"true",onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(_,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,hidden:"true",value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(_,null,a.createElement(o.Z,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,hidden:"true",value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),a.createElement(_,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.digital_education_for_all,onChange:this.handleCheckboxInput,name:"digital_education_for_all",hidden:"true",value:"1"}),label:"Olen tällä hetkellä opiskelijana Digital Education for All -hankkeessa. Jätä tämä valitsematta mikäli et tiedä kyseisestä hankkeesta."})),a.createElement(_,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",hidden:"true",value:"1"}),label:this.props.t("marketing")})),0===this.state.course_variants.length?null:a.createElement("div",null,a.createElement("h2",null,this.props.t("courseInfo")),a.createElement(_,null,a.createElement(s.Z,{control:a.createElement(l.Z,{checked:this.state.use_course_variant,onChange:this.handleCourseVariantCheckbox,name:"use_course_variant",value:"1"}),disabled:0===this.state.course_variants.length,label:this.props.t("useCourseVariantLabel")})),a.createElement(_,null,a.createElement(u.Z,{fullWidth:!0,variant:"outlined"},a.createElement(c.Z,{id:"select-course",shrink:this.state.course_variant||"course_variant"===this.state.focused},this.props.t("courseVariant")),a.createElement(d.Z,{key:this.state.use_course_variant,disabled:!this.state.use_course_variant,labelId:"select-course",label:this.props.t("courseVariant"),name:"course_variant",value:this.state.course_variant,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus},a.createElement(m.Z,{value:"",disabled:!0},this.props.t("chooseCourse")),this.state.course_variants.map((e=>{const t=e.tmcOrganization+"-"+e.tmcCourse;return a.createElement(m.Z,{value:t,key:t},e.organizationName,": ",e.title)}))))))))),this.state.error&&a.createElement(Z,null,a.createElement("b",null,this.props.t("fillRequired"))),this.state.errorObj&&a.createElement(C,null,this.state.errorObj.toString()))}}t.Z=(0,g.Z)("common")((0,v.Z)(k))},65826:function(e,t,n){n.r(t);var a=n(67294),i=n(35414),r=n(50535),o=n(96038),s=n(38015),l=n(25444),u=n(54021),c=n(86810),d=n(52311),m=n(77606),h=n(23168),f=n(62944),p=n(58337);const v=(0,r.default)(p.Z).withConfig({displayName:"profile__StyledSnackbarContent",componentId:"sc-3be922-0"})(["background-color:#43a047 !important;"]),g=(0,r.default)(m.G).withConfig({displayName:"profile__StyledIcon",componentId:"sc-3be922-1"})(["margin-right:0.5rem;"]);class _ extends a.Component{constructor(){super(...arguments),this.state={successMessage:null},this.onStepComplete=()=>{this.setState({successMessage:"Tiedot tallennettu!"})},this.handleClose=()=>{this.setState({successMessage:null})}}async componentDidMount(){var e;if(!this.context.loggedIn)return;let t=await(0,d.gb)();null==t||null===(e=t.extra_fields)||void 0===e||e.research}render(){return this.context.loggedIn?a.createElement(o.Z,null,a.createElement(c.Z,null,a.createElement(i.Z,{title:"Profiel"}),a.createElement("h1",null,"Profiel"),a.createElement(s.Z,{onComplete:this.onStepComplete})),a.createElement(f.Z,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.successMessage,autoHideDuration:6e3,onClose:this.handleClose},a.createElement(v,{variant:"success",message:a.createElement(a.Fragment,null,a.createElement(g,{icon:h.f8k})," ",a.createElement("span",null,this.state.successMessage))}))):("undefined"!=typeof window&&(0,l.navigate)("/sign-in"),a.createElement("div",null,"Redirecting..."))}}_.contextType=u.ZP,t.default=(0,u._N)(_)}}]);
//# sourceMappingURL=component---src-pages-profile-js-d3bb38c2c397ce6cb38f.js.map