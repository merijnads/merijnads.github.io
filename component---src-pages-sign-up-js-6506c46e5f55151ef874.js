"use strict";(self.webpackChunkohjelmoinnin_mooc=self.webpackChunkohjelmoinnin_mooc||[]).push([[717],{38015:function(t,e,a){var s=a(67294),i=a(85420),n=a(29114),r=a(1097),o=a(48086),l=a(22702),u=a(31690),h=a(89711),d=a(31295),m=a(90058),c=a(52311),p=a(82441),_=a(50535),v=a(13578),f=a(50238);const g=_.default.div.withConfig({displayName:"CourseOptionsEditor__Row",componentId:"sc-15i8a3h-0"})(["margin-bottom:1.5rem;"]),b=_.default.form.withConfig({displayName:"CourseOptionsEditor__Form",componentId:"sc-15i8a3h-1"})([""]),E=_.default.div.withConfig({displayName:"CourseOptionsEditor__InfoBox",componentId:"sc-15i8a3h-2"})(["margin-bottom:2rem;"]),C=_.default.div.withConfig({displayName:"CourseOptionsEditor__FormContainer",componentId:"sc-15i8a3h-3"})(["height:100%;margin-top:2rem;"]),w=(0,_.default)(i.Z).withConfig({displayName:"CourseOptionsEditor__WarningBox",componentId:"sc-15i8a3h-4"})(["margin:2rem 0;background:#f1a9a0;padding:1rem;font-weight:bold;"]);class k extends s.Component{constructor(){super(...arguments),this.onClick=async t=>{t.preventDefault(),this.setState({submitting:!0});let e={digital_education_for_all:this.state.digital_education_for_all,use_course_variant:this.state.use_course_variant,course_variant:this.state.course_variant,marketing:this.state.marketing,research:this.state.research};const a={first_name:this.state.first_name,last_name:this.state.last_name,organizational_id:this.state.student_number};try{await(0,c.ek)({extraFields:e,userField:a}),this.setState({submitting:!1}),this.props.onComplete()}catch(s){this.setState({errorObj:s,submitting:!1})}},this.state={submitting:!1,error:!0,errorObj:void 0,digital_education_for_all:!1,marketing:!1,research:void 0,first_name:void 0,last_name:void 0,use_course_variant:void 0,course_variant:"",course_variants:[],email:void 0,student_number:void 0,loading:!0,focused:null},this.handleInput=t=>{const e=t.target.name,a=t.target.value;this.setState({[e]:a},(()=>{this.validate()}))},this.handleCheckboxInput=t=>{const e=t.target.name,a=t.target.checked;this.setState({[e]:a},(()=>{this.validate()}))},this.handleCourseVariantCheckbox=t=>{this.setState({use_course_variant:t.target.checked,course_variant:""},(()=>{this.validate()}))},this.handleFocus=t=>{const e=t.target.name;this.setState({focused:e})},this.handleUnFocus=()=>{this.setState({focused:null})},this.validate=()=>{this.setState((t=>{const e=void 0===t.research,a=t.use_course_variant&&!t.course_variant;return{error:e||a}}))}}async componentDidMount(){var t,e,a,s,i,n,r,o,l;const u=await(0,c.$V)(),h=await(0,c.lI)();let d="t"===(null===(t=u.extra_fields)||void 0===t?void 0:t.use_course_variant),m=null!==(e=null===(a=u.extra_fields)||void 0===a?void 0:a.course_variant)&&void 0!==e?e:"";h.find((t=>t.key===m))||(d=!1,m=""),this.setState({first_name:null===(s=u.user_field)||void 0===s?void 0:s.first_name,last_name:null===(i=u.user_field)||void 0===i?void 0:i.last_name,email:u.email,student_number:null===(n=u.user_field)||void 0===n?void 0:n.organizational_id,digital_education_for_all:"t"===(null===(r=u.extra_fields)||void 0===r?void 0:r.digital_education_for_all),use_course_variant:d,course_variant:m,course_variants:h,marketing:"t"===(null===(o=u.extra_fields)||void 0===o?void 0:o.marketing),research:null===(l=u.extra_fields)||void 0===l?void 0:l.research,loading:!1},(()=>{this.validate()}))}render(){return s.createElement(C,null,s.createElement(p.Z,{loading:this.state.loading,heightHint:"490px"},s.createElement(E,null,s.createElement(i.Z,null,s.createElement(n.Z,null,this.props.t("loggedInWith"),this.state.email)))),s.createElement("h1",null,this.props.t("studentInfo")),s.createElement(b,null,s.createElement(E,null,this.props.t("aboutYourself")),s.createElement(p.Z,{loading:this.state.loading,heightHint:"490px"},s.createElement("div",null,s.createElement(g,null,s.createElement(r.Z,{variant:"outlined",type:"text",label:this.props.t("firstName"),autoComplete:"given-name",name:"first_name",InputLabelProps:{shrink:this.state.first_name||"first_name"===this.state.focused},fullWidth:!0,value:this.state.first_name,hidden:"true",onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(g,null,s.createElement(r.Z,{variant:"outlined",type:"text",label:this.props.t("lastName"),autoComplete:"family-name",name:"last_name",InputLabelProps:{shrink:this.state.last_name||"last_name"===this.state.focused},fullWidth:!0,hidden:"true",value:this.state.last_name,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(g,null,s.createElement(r.Z,{variant:"outlined",type:"text",label:this.props.t("sid"),name:"student_number",InputLabelProps:{shrink:this.state.student_number||"student_number"===this.state.focused},fullWidth:!0,hidden:"true",value:this.state.student_number,onChange:this.handleInput,helperText:this.props.t("nosid"),onFocus:this.handleFocus,onBlur:this.handleUnFocus})),s.createElement(g,null,s.createElement(o.Z,{control:s.createElement(l.Z,{checked:this.state.digital_education_for_all,onChange:this.handleCheckboxInput,name:"digital_education_for_all",hidden:"true",value:"1"}),label:"Olen tällä hetkellä opiskelijana Digital Education for All -hankkeessa. Jätä tämä valitsematta mikäli et tiedä kyseisestä hankkeesta."})),s.createElement(g,null,s.createElement(o.Z,{control:s.createElement(l.Z,{checked:this.state.marketing,onChange:this.handleCheckboxInput,name:"marketing",hidden:"true",value:"1"}),label:this.props.t("marketing")})),0===this.state.course_variants.length?null:s.createElement("div",null,s.createElement("h2",null,this.props.t("courseInfo")),s.createElement(g,null,s.createElement(o.Z,{control:s.createElement(l.Z,{checked:this.state.use_course_variant,onChange:this.handleCourseVariantCheckbox,name:"use_course_variant",value:"1"}),disabled:0===this.state.course_variants.length,label:this.props.t("useCourseVariantLabel")})),s.createElement(g,null,s.createElement(u.Z,{fullWidth:!0,variant:"outlined"},s.createElement(h.Z,{id:"select-course",shrink:this.state.course_variant||"course_variant"===this.state.focused},this.props.t("courseVariant")),s.createElement(d.Z,{key:this.state.use_course_variant,disabled:!this.state.use_course_variant,labelId:"select-course",label:this.props.t("courseVariant"),name:"course_variant",value:this.state.course_variant,onChange:this.handleInput,onFocus:this.handleFocus,onBlur:this.handleUnFocus},s.createElement(m.Z,{value:"",disabled:!0},this.props.t("chooseCourse")),this.state.course_variants.map((t=>{const e=t.tmcOrganization+"-"+t.tmcCourse;return s.createElement(m.Z,{value:e,key:e},t.organizationName,": ",t.title)}))))))))),this.state.error&&s.createElement(E,null,s.createElement("b",null,this.props.t("fillRequired"))),this.state.errorObj&&s.createElement(w,null,this.state.errorObj.toString()))}}e.Z=(0,f.Z)("common")((0,v.Z)(k))},10316:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var s=a(67294),i=a(35414),n=a(96038),r=a(25444),o=a(1097),l=a(83332),u=a(52311),h=a(47065),d=a(50238),m=a(50535),c=a(13578);const p=m.default.div.withConfig({displayName:"CreateAccountForm__Row",componentId:"jadb0u-0"})(["margin-bottom:1.5rem;"]),_=m.default.form.withConfig({displayName:"CreateAccountForm__Form",componentId:"jadb0u-1"})([""]),v=m.default.div.withConfig({displayName:"CreateAccountForm__InfoBox",componentId:"jadb0u-2"})(["margin-bottom:2rem;"]),f=m.default.div.withConfig({displayName:"CreateAccountForm__FormContainer",componentId:"jadb0u-3"})(["height:100%;margin-top:2rem;"]);class g extends s.Component{constructor(){super(...arguments),this.onClick=async t=>{if(t.preventDefault(),this.setState({submitting:!0,triedSubmitting:!0}),this.validate())try{await(0,u.o1)({email:this.state.email,password:this.state.password,password_confirmation:this.state.password_confirmation}),await(0,u.YR)({username:this.state.email,password:this.state.password}),this.props.onComplete()}catch(e){try{let t="";Object.entries(e).forEach((e=>{const a=e[0];e[1].forEach((e=>{let s=(0,h.fm)(a.replace(/_/g," ")+" "+e+".");"Email has already been taken."===s&&(s=this.props.t("emailInUse")),t=t+" "+s}))})),""===t&&(t=this.props.t("problemCreatingAccount")+JSON.stringify(e)),this.setState({error:t,submitting:!1,errorObj:e})}catch(a){this.setState({error:JSON.stringify(e),submitting:!1})}this.setState({submitting:!1})}else this.setState({canSubmit:!1,submitting:!1})},this.handleInput=t=>{const e=t.target.name,a=t.target.value;this.setState({[e]:a},(()=>{this.validate()}))},this.validate=()=>{let t={error:"",errorObj:{}};const{email:e,password:a,password_confirmation:s,validatePassword:i,validateEmail:n,triedSubmitting:r}=this.state;return e&&n&&(-1===e.indexOf("@")&&(t.error+=this.props.t("noAt"),t.errorObj.email=this.props.t("noAt")),e&&-1===e.indexOf(".")&&(t.error+=this.props.t("noAt"),t.errorObj.email=this.props.t("noAt"))),a&&s&&i&&a!==s&&(t.error+=this.props.t("passwordsNoMatch"),t.errorObj.password=this.props.t("passwordsNoMatch"),t.errorObj.password_confirmation=this.props.t("passwordsNoMatch")),""===t.error&&(t.error=!1,t.canSubmit=!0),e&&a&&s?(this.setState(t),!t.error):(r&&(t.canSubmit=!1),!1)},this.state={email:void 0,password:void 0,password_confirmation:void 0,submitting:!1,error:!1,errorObj:{},validatePassword:!1,validateEmail:!1,canSubmit:!0,triedSubmitting:!0}}render(){return this.context.loggedIn?((0,r.navigate)("/"),s.createElement("div",null,"Redirecting...")):s.createElement(f,null,s.createElement("h1",null,this.props.t("createAccount")),s.createElement(_,{onChange:this.validate},s.createElement(v,null,this.props.t("courseUses")," ",s.createElement("a",{href:"https://mooc.fi",target:"_blank",rel:"noopener noreferrer"},"mooc.fi")," ",this.props.t("courseUses2")),s.createElement(p,null,s.createElement(o.Z,{variant:"outlined",type:"email",name:"email",autoComplete:"email",label:this.props.t("email"),error:this.state.errorObj.email,fullWidth:!0,value:this.state.email,onChange:this.handleInput,onBlur:()=>{this.setState({validateEmail:!0},(()=>{this.validate()}))}})),s.createElement(p,null,s.createElement(o.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("password"),name:"password",error:this.state.errorObj.password,fullWidth:!0,value:this.state.password,onChange:this.handleInput})),s.createElement(p,null,s.createElement(o.Z,{variant:"outlined",type:this.state.showPassword?"text":"password",label:this.props.t("passwordAgain"),name:"password_confirmation",error:this.state.errorObj.password_confirmation,fullWidth:!0,value:this.state.password_confirmation,onChange:this.handleInput,onBlur:()=>{this.setState({validatePassword:!0},(()=>{this.validate()}))}})),s.createElement(p,null,s.createElement(l.Z,{onClick:this.onClick,disabled:this.state.submitting||!this.state.canSubmit,variant:"contained",color:"primary",fullWidth:!0,type:"submit"},this.props.t("create")))),s.createElement(p,null,s.createElement(r.Link,{to:"/sign-in"},this.props.t("alreadyHaveAccount"))),this.state.error&&s.createElement(v,null,s.createElement("b",null,this.props.t("error")," ",this.state.error)))}}var b=(0,d.Z)("user")((0,c.Z)(g)),E=a(38015),C=a.p+"static/email-example-dfbd631229d83018bc9fcaba5fffd852.png";const w=m.default.div.withConfig({displayName:"ConfirmEmail__InfoBox",componentId:"sc-1t4zqh3-0"})(["margin-bottom:2rem;"]),k=m.default.div.withConfig({displayName:"ConfirmEmail__FormContainer",componentId:"sc-1t4zqh3-1"})(["height:100%;margin-top:2rem;"]),y=m.default.img.withConfig({displayName:"ConfirmEmail__StyledImage",componentId:"sc-1t4zqh3-2"})(["width:100%;padding:1rem 0;"]);class I extends s.Component{constructor(){super(...arguments),this.onClick=async t=>{t.preventDefault()},this.state={email:void 0,password:void 0,submitting:!1,error:!1}}render(){return s.createElement(k,null,s.createElement("h1",null,this.props.t("welcomeToCourse")),s.createElement(w,null,s.createElement("p",null,this.props.t("emailSent")," "),s.createElement("p",null,this.props.t("emailExample")),s.createElement(y,{src:C,alt:this.props.t("emaiLExampleAria")})),s.createElement("p",null,this.props.t("nowContinue")," ",s.createElement(r.Link,{to:"/osa-1"},this.props.t("toMaterial")),"."))}}var S=(0,d.Z)("user")((0,c.Z)(I)),Z=a(54021),x=a(86810);class O extends s.Component{constructor(){super(...arguments),this.state={step:1},this.onStepComplete=()=>{this.setState((t=>({step:t.step+1}))),"undefined"!=typeof window&&window.scrollTo(0,0)}}render(){let t;return t=1===this.state.step?s.createElement(b,{onComplete:this.onStepComplete}):2===this.state.step?s.createElement(E.Z,{courseVariant:"nodl",onComplete:this.onStepComplete}):s.createElement(S,{onComplete:this.onStepComplete}),s.createElement(n.Z,null,s.createElement(i.Z,{title:"Luo käyttäjätunnus"}),s.createElement(x.Z,null,t))}}O.contextType=Z.ZP;var F=(0,Z._N)(O)}}]);
//# sourceMappingURL=component---src-pages-sign-up-js-6506c46e5f55151ef874.js.map